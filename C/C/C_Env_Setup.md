VS Code Extension C/C++ extension by Microsoft
Linter:
	Clang-Tidy:
		Install on system BY: 
			sudo apt-get update
			sudo apt-get install clang-tidy
		Extension CS 128 Clang-Tidy by CS 128

	Cpplint:
        Install on system BY: 
        	Check: 
        		python3 --version
				pip3 --version
			Install pip if needed:
				sudo apt update
				sudo apt install python3-pip
			Install:
        		pip3 install cpplint
        	Check:
        		cpplint --version
        
Static Analysis:
    Cppcheck:
    	Install on system BY: 
    		sudo apt-get update
    		sudo apt-get install cppcheck
    		cppcheck --version
    

**Ensure `clang-tidy` and `Cppcheck` are installed** on system & PATH. 

**create a `.vscode` folder + `tasks.json`** in root

### `tasks.json` ( TODO: check paths)

```json
{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "Run clang-tidy",
            "type": "shell",
            "command": "clang-tidy",
            "args": [
                "-p=${workspaceFolder}/build",
                "${workspaceFolder}/src/*.c",
                "--",
                "-I${workspaceFolder}/include"
            ],
            "group": {
                "kind": "test",
                "isDefault": true
            },
            "problemMatcher": "$gcc",
            "presentation": {
                "reveal": "always"
            }
        },
        {
            "label": "Run Cppcheck",
            "type": "shell",
            "command": "cppcheck",
            "args": [
                "--enable=all",
                "--suppress=missingIncludeSystem",
                "${workspaceFolder}/src",
                "-I${workspaceFolder}/include",
                "--output-file=${workspaceFolder}/cppcheck_report.txt"
            ],
            "group": "test",
            "problemMatcher": [],
            "presentation": {
                "reveal": "always"
            }
        },
         {
            "label": "Run Cppcheck",
            "type": "shell",
            "command": "cppcheck",
            "args": [
                "--enable=all",
                "--suppress=missingIncludeSystem",
                "--force",
                "--output-file=${workspaceFolder}/cppcheck_report.txt",
                "${workspaceFolder}/src",
                "-I${workspaceFolder}/include"
            ],
            "group": "test",
            "problemMatcher": {
                "owner": "cppcheck",
                "fileLocation": ["absolute"],
                "pattern": {
                    "regexp": "^(\\S.*):(\\d+):(\\d+):\\s+(warning|error|performance|portability|information|style)\\s+:(.*)$",
                    "file": 1,
                    "line": 2,
                    "column": 3,
                    "severity": 4,
                    "message": 5
                }
            },
            "presentation": {
                "reveal": "always",
                "panel": "new"
            }
        }
    ]
}
```

### Notes

- **clang-tidy**: The `-p` option specifies the build directory where `compile_commands.json` is located. This file is generated by your build system (CMake, for example) and contains all the commands used to compile your project. If your project doesn't generate this file, you'll need to manually specify the files to analyze and include paths as shown.
- **Cppcheck**: The `--suppress=missingIncludeSystem` option suppresses warnings about missing system headers,

//TODO: research system headers...

### Running the Tasks

- To run these tasks, open the Command Palette in VS Code (`Ctrl+Shift+P` or `Cmd+Shift+P` on macOS), type `Run Task`, and select either `Run clang-tidy` or `Run Cppcheck` from ect the list of tasks.

##### TESTING---

### Unity
	- Install [http://www.throwtheswitch.org/unity](http://www.throwtheswitch.org/unity)

### CMock
	- Install [http://www.throwtheswitch.org/cmock](http://www.throwtheswitch.org/cmock)

### Project Structure
	src
	test (test files)
	lib/Unity , lib/CMock (for Unity and CMock files)
	
### Runner
	Makefile (at root) (example)
	---------------------------------------------------------
	CC=gcc
	CFLAGS=-I. -Isrc/ -Ilib/Unity/src/ -Ilib/CMock/src/
	DEPS = $(wildcard src/*.h)
	OBJ = $(patsubst src/%.c, obj/%.o, $(wildcard src/*.c))
	TEST_SRC = $(wildcard test/*.c)
	TEST_OBJ = $(patsubst test/%.c, obj/test/%.o, $(wildcard test/*.c))
	UNITY = lib/Unity/src/unity.c
	CMOCK = lib/CMock/src/cmock.c
	WORKSPACE_FOLDER=$(PWD)
	CLANG_TIDY_FLAGS=-p=$(WORKSPACE_FOLDER)/build -I$(WORKSPACE_FOLDER)/include
	CPPCHECK_FLAGS=--enable=all --suppress=missingIncludeSystem --force -I$(WORKSPACE_FOLDER)/include --output-file=$(WORKSPACE_FOLDER)/cppcheck_report.txt
	CPPLINT_FLAGS=--output=eclipse

	# Compile object files
	obj/%.o: src/%.c $(DEPS)
		$(CC) -c -o $@ $< $(CFLAGS)

	obj/test/%.o: test/%.c
		$(CC) -c -o $@ $< $(CFLAGS)

	# Run clang-tidy
	clang-tidy:
		clang-tidy $(CLANG_TIDY_FLAGS) $(WORKSPACE_FOLDER)/src/*.c -- > clang-tidy_report.txt

	# Run cppcheck
	cppcheck:
		cppcheck $(CPPCHECK_FLAGS) $(WORKSPACE_FOLDER)/src

	# Run cpplint
	cpplint:
		cpplint $(CPPLINT_FLAGS) $(WORKSPACE_FOLDER)/src/*.c > cpplint_report.txt

	# Clean reports
	clean_reports:
		@rm -f clang-tidy_report.txt cppcheck_report.txt cpplint_report.txt

	# Main test target
	test: clean_reports clang-tidy cppcheck cpplint $(OBJ) $(TEST_OBJ)
		$(CC) -o test_runner $^ $(UNITY) $(CMOCK) $(CFLAGS)
		./test_runner

	clean:
		rm -f obj/*.o obj/test/*.o test_runner

	.PHONY: clean test clang-tidy cppcheck cpplint clean_reports
	----------------------------------------------------------
		
		

		
		
	
